import { main } from "../flappyGame";
import { Flappy } from "../classes/Flappy"
import { Pipes } from  "../classes/Pipes"
import { entityList, globals } from "../../sharedGlobals";
import { NN } from "../classes/NN"
import { simulationReset } from "./simulationReset";
import { decodeNetwork } from "./encodeDecode";
import { setDynamicInterval } from "./setDynamicInterval";

export function flappyStart() {    
    globals.generationNum = 0;
    globals.pipeTimer = 0;
    entityList.Pipes = [];
    entityList.Flappies = [];
    entityList.Barrier = [];
    entityList.Cars = []; 
    if (globals.human) {
        entityList.Flappies.push(new Flappy());
        entityList.Pipes.push(new Pipes());
    } else {
        
        // console.log(entityList.NNs[0].weightArray);
        for (let i = 0; i < globals.simulatedNNs; i++) {
            entityList.NNs.push(new NN(...globals.NNBrain));
            entityList.NNs[i].createNeuralNet(0);
            let decodededNetwork = decodeNetwork('7 4 8 8 8 6 4 1 -0.5759472252579748 4.407397505575808 5.773152572215523 3.963891658109468 -0.86874739954632 0.8607702211942887 -1.146729642053869 -0.20031994396415453 -0.39224305437609225 -1.1081562824369986 -8.732876818715239 0.027970443079826563 -2.219895260505376 4.15873937768212 0.4384047810044784 0.25840845331708917 1.857388967795492 -0.3218628572442761 -0.16883447064028956 -0.4091218551559853 -0.2956230140546134 0.8019278471827469 -1.804829550859526 -1.119520898622265 -1.764832512516631 -1.9300116031772567 -0.2699501455629024 -1.1204848709893105 -5.897512185554247 0.746189880889357 -0.7170894844527151 -0.14738095964411244 -1.1372443512764596 0.362128985376668 0.15109130068186072 -0.7317490953719965 -0.919397451026728 -1.2674064804266971 -1.0337058982202112 0.4294715004880386 0.6751364758959404 7.682900839122195 -0.9940660920445843 1.2582241627339117 -0.24091686691012104 0.18094780000686234 -0.0031601243187750305 0.3722954662954449 3.9477509782801685 1.2714930705824212 0.3044627943199449 2.7670158985759197 -2.365569981251934 -1.1650315947894427 1.647879123508584 -0.19729179366715408 -0.9318131179855741 0.4897079174254852 -1.8975581467308602 1.2730473515789664 -0.3260265674106884 -0.954889692918161 -1.6213976515127673 -0.0818782961435485 -4.003513035889436 -6.400962155385668 0.4911842870477474 -0.5700725580332326 1.7020286740708874 2.0114349300845835 -3.8371276814665514 -0.32011483667536117 -1.2364025828018625 -0.5275865880587279 -0.5814228337309808 -21.243865520093244 -0.13558519021169738 2.828826030555816 -0.21328376626136822 -0.4055701618288551 -0.18223073446434146 0.44588941596715476 -0.20512793134980328 17.26601375780609 -0.22149065323398065 -0.6990922680478955 0.6196088898906171 -0.23770970213095804 -1.3716771585256868 -3.466147504016586 1.6002225085816515 -0.15846809399369705 2.681761978097617 -4.238216675688393 -2.798802855427645 1.2927828972067212 20.464489332535347 1.1137795826515964 0.01591326796302711 -0.22954278547182497 0.621781061461909 -0.253253645428674 0.1367009833823071 0.2634117613468031 -0.13367753859086115 0.577669548566035 -0.3176352703798892 3.594809899318065 0.7131245907465428 0.5827374465910805 -0.768991831135659 -2.649054615383164 -0.6751700542274575 4.8604276237062125 1.168113659520354 0.32570240894820834 -0.8502235955065766 -2.270062620180816 -1.2250379881595348 -0.22824144443734093 0.11278829227247202 -0.9423827851164602 -0.5142113743658523 3.3032417700412835 0.2775226945950079 -1.146597723135004 0.9731544684677833 0.7607496198396874 -0.9720996421525758 -1.1741529669192976 -1.8136522825249517 0.3608027570490507 -0.701859568214203 -0.2390700368426043 3.9164373248588076 2.4561744223509785 1.6039241652963228 3.177931385126435 -1.4452517038829227 -2.184007103285353 1.2522293194270824 1.4302610779914127 0.9098235783650188 0.11160963381255744 -0.2569824435149255 -0.32308773128869817 -0.9954236223542995 -1.020927023846948 2.195846322943446 4.652283122445227 0.054829093485091795 -6.431220155398287 0.4327857810381446 -0.7983438331018171 -0.6004798218724731 -3.2879011705161996 2.115670069742827 -2.9585451837188175 0.8478734191174053 0.48423771514383285 0.5954135487898777 2.8628483170033108 -1.2597870480671534 -0.4988515392751559 2.5523579947911306 0.8019593266734558 1.4033831219047084 0.7777565550488975 1.233908438432457 -0.3579097982878723 0.6271549588710843 -3.7700688292827116 -2.1397792376513483 -3.281770378529232 0.9421014533244465 -0.4742118092244471 1.0079908338108812 1.5790156371743806 -0.16775438667163334 0.45290662076262705 0.0941707854361729 2.959945476965639 -0.6660385333594974 0.41754821583681595 -0.06310207983738032 -1.9141373468513603 -0.7810163231464516 -0.03424555452354481 0.9814945946993081 -2.8502123833439508 -0.43984557227748305 1.207734110930287 -1.51380401512506 0.9658717399388912 0.4578108601285789 -1.8963222564991786 -0.33207824881874143 0.39368836159440546 -2.625972279413333 1.049113479261931 0.5489534336979727 -3.130308575923296 -11.457135261742522 -0.4176955579265717 0.8064286569051056 1.2193051442203213 -0.7893905418201983 0.19725271195842162 1.6804114324495596 -0.7025484489277353 0.9113594032404041 -13.068875800972311 4.477481470925265 0.26345970844346167 -1.4203520149088027 0.5670969074251723 0.6281156062274 -0.8844824606838682 1.3890501008641412 1.913481010411544 0.5373377659700036 -4.016456828610848 -0.7374454286775912 -3.293969925046508 -1.552364633828206 0.3322623202260544 -0.6241806464998213 0.26779056664457435 -0.943714168509763 -0.4619227892534644 0.19572862031364568 -0.6401809284530566 -0.33013015938553586 -0.879638453766372 4.937705396579154 -1.4661106408354645 -0.266570485089404 2.7524092021196243 2.6413618905696703 -1.505509929132853 0.8780098543151406 -0.12004859920235948 -1.058993818943499 -2.112950452011003 0.06701131897677425 7.001027643313685 2.125070268224568 -0.4940446566816252 2.959645108838712 -1.0102095067924273 -0.5661443251344385 -0.45177490639216505 0.2889770261951319 0.9910446353794874 0.042805964765145074 -1.9932249173990635 -1.5596373258394567 0.7202645863256513 -0.4910363079252301 0.3681847084851313 -6.306350526575843 0.4129110977055191 -0.7158572885729727 -0.9820742775502295 0.32960642875109825 1.2755883636533787 0.6876691007777431 14.315508585079932 2.0107586238859616 1.8346680785569198 -1.112219244156559 -0.9661381404259729 10.236621233430677 0.40606970674365495 0.5019780170029801')
            // // entityList.NNs[i].fullMutate(0, 10, 0.1);
            entityList.NNs[i].weightArray = decodededNetwork[1];
            entityList.NNs[i].biasArray = decodededNetwork[0];

            globals.fitnessDictionary[i] = i;
        }
        simulationReset(true);
    }
    

}